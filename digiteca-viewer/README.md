# Digiteca Viewer

This directory contains a simple web-based viewer for the transcriptions generated by the main `process_digiteca_gemini_full.py` script.

## Features

*   Displays Recto (front) and Verso (back) images side-by-side using IIIF URLs.
*   Shows the full JSON metadata extracted from the corresponding transcription file.
*   Provides a "spyglass" zoom effect (200%) on hovering over the images.
*   Includes "Previous" and "Next" buttons for navigating through the available transcriptions.

## Files

*   `index.html`: The main HTML structure of the viewer page.
*   `style.css`: CSS rules for layout, styling, and the spyglass effect.
*   `script.js`: JavaScript code for loading data, handling navigation, rendering metadata, and implementing the spyglass.
*   `generate_index.py`: A Python script to generate the necessary `index.json` file.
*   `index.json`: (Generated by `generate_index.py`) A list of available transcription JSON filenames used for navigation.
*   `start_viewer.sh`: A convenience script to generate the index and start the required web server.

## Prerequisites

*   Python 3 (for `generate_index.py` and the web server).
*   Transcription JSON files must exist in the `../transcriptions/` directory (generated by running the main `process_digiteca_gemini_full.py` script).

## Usage

The easiest way to run the viewer is using the provided bash script:

1.  **Navigate to this directory:**
    ```bash
    cd path/to/process-digiteca-gemeni/digiteca-viewer
    ```
2.  **Make the script executable (if needed):**
    ```bash
    chmod +x start_viewer.sh
    ```
3.  **Run the script:**
    ```bash
    ./start_viewer.sh
    ```

This script will first run `generate_index.py` to update the `index.json` file based on the current contents of the `../transcriptions/` directory. Then, it will navigate up one level (to `process-digiteca-gemeni`) and start Python's built-in HTTP server on port 8000.

Once the server is running, open your web browser and navigate to:

`http://<your-server-ip>:8000/digiteca-viewer/`

(Replace `<your-server-ip>` with the actual IP address or hostname of the machine running the server. If running locally, you can use `http://localhost:8000/digiteca-viewer/` or `http://127.0.0.1:8000/digiteca-viewer/`).

**Manual Steps (if not using `start_viewer.sh`):**

1.  **Generate Index:** Ensure the `index.json` file is up-to-date by running the generator script from within the `digiteca-viewer` directory:
    ```bash
    python generate_index.py
    ```
2.  **Start Web Server:** Navigate to the **parent** directory (`process-digiteca-gemeni`) and start the server:
    ```bash
    cd ..
    python3 -m http.server 8000
    ```
3.  **Access Viewer:** Open `http://<your-server-ip>:8000/digiteca-viewer/` in your browser.

## How it Works

*   The viewer first fetches `index.json` to get a list of available transcription filenames.
*   When navigating, it fetches the corresponding `{barcode}.json` file from the `../transcriptions/` directory.
*   It extracts the `box_barcode`, `recto_filename`, and `verso_filename` from the JSON to construct the IIIF image URLs (replacing `.tif` with `.jpg`).
*   The entire content of the fetched JSON file is displayed in the metadata section.
